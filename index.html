<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <title>🔥王廷香曝光站🔥 | 😭震撼实录🌍</title>
  <meta name="description" content="👁️ 王廷香 • 你逃不掉的记录" />
  <style>
    body {
      font-family: 'Noto Sans SC', sans-serif;
      text-align: center;
      margin: 0;
      padding: 0;
      background: #f5f5f7;
      color: #1d1d1f;
      font-size: 16px;
      transition: all 0.15s ease-in-out;
    }

    body.dark-mode {
      background: #1d1d1f;
      color: #f5f5f7;
    }

    h1 {
      font-size: 2em;
      font-weight: 600;
      margin-top: 20px;
      transition: color 0.15s ease;
    }

    .container {
      max-width: 780px;
      margin: 40px auto;
      padding: 20px;
    }

    .card {
      background: rgba(255, 255, 255, 0.65);
      backdrop-filter: blur(15px);
      border-radius: 16px;
      padding: 24px;
      margin: 20px 0;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      transition: all 0.15s ease;
    }

    body.dark-mode .card {
      background: rgba(34, 34, 34, 0.75);
    }

    .image-grid {
      display: flex;
      justify-content: center;
      gap: 12px;
      padding: 10px;
    }

    .image-grid img {
      width: 30%;
      border-radius: 12px;
      transition: transform 0.15s ease-in-out;
    }

    .image-grid img:hover {
      transform: scale(1.04);
    }

    .button {
      display: inline-block;
      background: #007aff;
      color: #fff;
      border-radius: 22px;
      padding: 12px 20px;
      font-size: 15px;
      font-weight: 600;
      border: none;
      cursor: pointer;
      transition: background 0.15s ease, box-shadow 0.15s ease;
      outline: none;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .button:hover {
      background: #005ecb;
      box-shadow: 0 6px 14px rgba(0, 0, 0, 0.3);
    }

    .mode-switch {
      position: fixed;
      bottom: 20px;
      left: 20px;
      width: 48px;
      height: 48px;
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(10px);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      cursor: pointer;
      transition: background 0.15s ease, transform 0.2s ease, color 0.2s ease;
      color: #111;
      border: none;
      outline: none;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      z-index: 1000;
    }

    .mode-switch:hover {
      background: rgba(255, 255, 255, 1);
      transform: scale(1.1);
    }

    body.dark-mode .mode-switch {
      background: rgba(34, 34, 34, 0.8);
      color: #f5f5f7;
    }

    .custom-audio-controls {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-top: 12px;
      justify-content: center;
    }

    .custom-audio-controls button {
      font-size: 20px;
      background: #007aff;
      border: 2px solid #005ecb; /* 添加边框 */
      border-radius: 8px;
      color: white;
      padding: 6px 12px;
      cursor: pointer;
      box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
      transition: border-color 0.2s ease;
    }

    .custom-audio-controls button:hover {
      border-color: #003f8c; /* 鼠标悬停时改变边框颜色 */
    }

    .custom-audio-controls input[type="range"] {
      width: 60%;
      height: 6px;
      cursor: pointer;
    }

    h2 {
      white-space: nowrap;
    }

    .quote-text {
      white-space: pre-wrap;
    }

    #anger-value {
      font-size: 22px;
      margin-top: 10px;
    }

    #emoji {
      font-size: 48px;
      margin: 10px 0;
    }

    canvas {
      width: 100%;
      max-width: 600px;
      margin: 20px auto;
    }

    body.dark-mode #infinite-img,
    body.dark-mode #infinite-canvas {
      filter: invert(1);
    }

    #play-pause-custom {
      font-size: 2rem;
      cursor: pointer;
      transition: transform 0.2s ease, color 0.3s ease, text-shadow 0.3s ease;
      color: #ff2255;
      text-shadow: 0 0 5px #ff2255;
      background: none;
      border: none;
    }

    #play-pause-custom:hover {
      transform: scale(1.3) rotate(-5deg);
      color: #ff0055;
      text-shadow: 0 0 15px #ff0033, 0 0 30px #ff0033;
      filter: drop-shadow(0 0 5px red);
    }

    #play-pause-custom:active {
      transform: scale(0.9) rotate(3deg);
      color: #aa0022;
      text-shadow: 0 0 10px #aa0022;
    }
  </style>
</head>
<body>

  <div class="container">
    <h1>
      <img src="emoji/fire_1f525.png" alt="🔥" style="height: 1em; vertical-align: middle;" />
      王廷香曝光站
      <img src="emoji/fire_1f525.png" alt="🔥" style="height: 1em; vertical-align: middle;" />
      <br />
      <img src="emoji/cry.png" alt="😭" style="height: 1em; vertical-align: middle;" />
      震撼实录
      <img src="emoji/diqiu.png" alt="🌍" style="height: 1em; vertical-align: middle;" />
    </h1>

    <div class="image-grid">
      <img src="images/photo1.jpg" alt="照片1" />
      <img src="images/photo4.jpg.jpg" alt="照片2" />
      <img src="images/photo3.jpg" alt="照片3" />
    </div>

    <div class="card">
      <h2>
        <img src="emoji/star.png" alt="✨" style="height: 1em; vertical-align: middle;" />
        王廷香金句良言抽取
        <img src="emoji/star.png" alt="✨" style="height: 1em; vertical-align: middle;" />
      </h2>
      <p id="quote-text">
        <img src="emoji/middle-finger.png" alt="🖕" style="height: 1em; vertical-align: middle;" />
        点击按钮抽取金句吧
        <img src="emoji/middle-finger.png" alt="🖕" style="height: 1em; vertical-align: middle;" />
      </p>
      <button class="button" onclick="showRandomQuote()">
        开
        <img src="emoji/direct-hit_1f3af.png" alt="🎯" style="height: 1em; vertical-align: middle;" />
        <img src="emoji/middle-finger.png" alt="🖕" style="height: 1em; vertical-align: middle;" />
        抽
      </button>
    </div>

    <div class="card">
      <h2 class="quote-text">「此曲只应天上有，<br />人间能得几回闻。」</h2>
      <audio id="audio" src="audio_sample.mp3">
        你的破浏览器破到不支持音频播放
        <img src="emoji/wtxbushigay.png" alt="🙄" style="height: 1em; vertical-align: middle;" />
        。
      </audio>
      <button id="play-pause-custom">
        <img src="emoji/white-up-pointing-backhand-index_1f446.png" alt="👆" style="height: 1em; vertical-align: middle;" />
      </button>
    </div>

    <div class="card">
      <h2>
        <img src="emoji/fire_1f525.png" alt="🔥" style="height: 1em; vertical-align: middle;" />
        4K王廷香旋转
      </h2>
      <div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;width:100%;border-radius:12px;">
        <iframe src="//player.bilibili.com/player.html?isOutside=true&aid=114250458601371&bvid=BV1JCZzYFEam&cid=29146941761&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position:absolute;top:0;left:0;width:100%;height:100%;border-radius:12px;"></iframe>
      </div>
    </div>

    <div class="mode-switch" onclick="toggleDarkMode()">
      <span id="mode-icon"><img src="emoji/hotface.png" alt="🥵" style="height: 1em; vertical-align: middle;"></span>
    </div>
  </div>

  <div id="long-legs-container" style="width:100%;display:flex;flex-direction:column;align-items:center;margin-top:60px;">
    <img id="infinite-img" src="无限长.png" alt="无限长zhǎng腿" style="display:block;width:100%;max-width:600px;height:auto;margin:0;padding:0;" />
    <canvas id="infinite-canvas" style="display:block;width:100%;max-width:600px;margin:0;padding:0;"></canvas>
  </div>

  <script>
    // 添加 emoji 到图片的映射
    const emojiToImage = {
      '🔥': 'hotface.png',
      '😭': 'cry.png',
      '🌍': 'diqiu.png',
      '👁️': 'eye.png',
      '✨': 'star.png',
      '🖕': 'middle-finger.png',
      '🎯': 'direct-hit_1f3af.png',
      '💀': 'skull_1f480.png',
      '👀': 'eyes_1f440.png',
      '🤨': 'face-with-raised-eyebrow_1f928.png',
      '⚖️': 'balance-scale_2696-fe0f.png',
      '🧐': 'face-with-monocle_1f9d0.png',
      '🙃': 'upside-down-face_1f643.png',
      '🚫': 'prohibited_1f6ab.png',
      '👂': 'ear_1f442.png',
      '👆': 'white-up-pointing-backhand-index_1f446.png',
      '🥵': 'hot-face_1f975.png',
      '🫥': 'dotted-line-face_1fae5.png',
      '🙄': 'wtxbushigay.png'
    };

    // 替换文本中的 emoji 为图片
    function replaceEmojisWithImages(element) {
      if (!element) return;
      
      const text = element.innerHTML;
      let newText = text;
      
      for (const [emoji, image] of Object.entries(emojiToImage)) {
        newText = newText.replace(emoji, `<img src="emoji/${image}" alt="${emoji}" style="height: 1em; vertical-align: middle;">`);
      }
      
      element.innerHTML = newText;
    }

    // 简体版金句
    const quotes = [
      "<img src='emoji/skull_1f480.png' alt='💀' style='height: 1em; vertical-align: middle;'> 你的内心会受到折磨的。",
      "<img src='emoji/eyes_1f440.png' alt='👀' style='height: 1em; vertical-align: middle;'> 人在做，天在看。",
      "<img src='emoji/face-with-raised-eyebrow_1f928.png' alt='🤨' style='height: 1em; vertical-align: middle;'> 你有什么资本？",
      "<img src='emoji/balance-scale_2696-fe0f.png' alt='⚖️' style='height: 1em; vertical-align: middle;'> 公道自在人心。",
      "<img src='emoji/face-with-monocle_1f9d0.png' alt='🧐' style='height: 1em; vertical-align: middle;'> 你前后不像。",
      "<img src='emoji/upside-down-face_1f643.png' alt='🙃' style='height: 1em; vertical-align: middle;'> 你是没改变。",
      "<img src='emoji/eye.png' alt='👁️' style='height: 1em; vertical-align: middle;'> 视觉う染。",
      "<img src='emoji/wtxbushigay.png' alt='😠' style='height: 1em; vertical-align: middle;'> 你为什么总是不尊重别人？你为什么总是挑战别人的极限？",
      "<img src='emoji/prohibited_1f6ab.png' alt='🚫' style='height: 1em; vertical-align: middle;'> 你不要沉浸在你自己的世界里面。",
      "<img src='emoji/middle-finger.png' alt='🖕' style='height: 1em; vertical-align: middle;'> 点到为止。",
      "<img src='emoji/ear_1f442.png' alt='👂' style='height: 1em; vertical-align: middle;'> 耳闻目染。"
    ];

    function showRandomQuote() {
      const randomIndex = Math.floor(Math.random() * quotes.length);
      const quoteElement = document.getElementById("quote-text");
      quoteElement.innerHTML = quotes[randomIndex];
      if (navigator.vibrate) {
        navigator.vibrate(78);
      }
    }

    function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
      const isDarkMode = document.body.classList.contains('dark-mode');
      localStorage.setItem('mode', isDarkMode ? 'dark' : 'light');

      const icon = document.getElementById("mode-icon");
      icon.innerHTML = '<img src="emoji/dotted-line-face_1fae5.png" alt="🫥" style="height: 1em; vertical-align: middle;">';
      setTimeout(() => {
        icon.innerHTML = isDarkMode ? 
          '<img src="emoji/hot-face_1f975.png" alt="🥶" style="height: 1em; vertical-align: middle;">' : 
          '<img src="emoji/cry.png" alt="😭" style="height: 1em; vertical-align: middle;">';
      }, 250);
    }

    window.onload = () => {
      const savedMode = localStorage.getItem('mode');
      if (savedMode === 'dark') {
        document.body.classList.add('dark-mode');
        document.getElementById("mode-icon").innerHTML = '<img src="emoji/hot-face_1f975.png" alt="🥶" style="height: 1em; vertical-align: middle;">';
      } else {
        document.getElementById("mode-icon").innerHTML = '<img src="emoji/cry.png" alt="😭" style="height: 1em; vertical-align: middle;">';
      }

      // 替换页面加载时的所有 emoji
      replaceEmojisWithImages(document.querySelector('h1'));
      replaceEmojisWithImages(document.querySelector('meta[name="description"]'));
      replaceEmojisWithImages(document.querySelector('h2'));
    };

    const audio = document.getElementById('audio');
    const button = document.getElementById('play-pause-custom');

    button.addEventListener('click', () => {
      if (audio.paused) {
        audio.play();
        button.innerHTML = '<img src="emoji/cry.png" alt="😭" style="height: 1em; vertical-align: middle;">';
      } else {
        audio.pause();
        button.innerHTML = '<img src="emoji/hotface.png" alt="🥵" style="height: 1em; vertical-align: middle;">';
      }
    });

    // 无限长图片功能
    (function() {
      const img = document.getElementById('infinite-img');
      const canvas = document.getElementById('infinite-canvas');
      let lastRepeatCount = 0;
      let imgLoaded = false;
      let lastSliceHeight = 48;

      function updateCanvas() {
        if (!imgLoaded) return;
        // 用 naturalWidth/naturalHeight 保证像素级别一致
        const imgW = img.naturalWidth;
        const imgH = img.naturalHeight;
        // 复制高度
        lastSliceHeight = Math.min(48, imgH);
        // 计算需要多少个片段
        const container = document.getElementById('long-legs-container');
        const rect = container.getBoundingClientRect();
        const windowHeight = window.innerHeight;
        const staticHeight = img.height;
        let neededRepeats = Math.ceil((window.innerHeight + window.scrollY - (rect.top + window.scrollY + staticHeight)) / lastSliceHeight) + 10;
        if (neededRepeats < 10) neededRepeats = 10;
        if (neededRepeats !== lastRepeatCount) {
          lastRepeatCount = neededRepeats;
          // 设置canvas宽高为原图像素宽高
          canvas.width = imgW;
          canvas.height = neededRepeats * lastSliceHeight;
          // 样式宽度与img一致
          canvas.style.width = img.offsetWidth + 'px';
          const ctx = canvas.getContext('2d');
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          // 画neededRepeats个最后片段
          for (let i = 0; i < neededRepeats; i++) {
            ctx.drawImage(
              img,
              0, imgH - lastSliceHeight, imgW, lastSliceHeight, // 源
              0, i * lastSliceHeight, imgW, lastSliceHeight // 目标
            );
          }
        }
      }
      img.onload = function() {
        imgLoaded = true;
        updateCanvas();
      };
      window.addEventListener('scroll', updateCanvas);
      window.addEventListener('resize', updateCanvas);
    })();
  </script>

</body>
</html>
