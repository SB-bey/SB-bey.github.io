<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>â€œç‹å»·é¦™ä½ æ²¡å¸ˆå¾·â€å…¨çƒæ›å…‰ç«™ ğŸŒğŸ”¥</title>
    <style>
        body {
            font-family: 'ç­‰çº¿', sans-serif;
            text-align: center;
            margin: 0;
            padding: 0;
            background-color: #f8f8f8;
            font-size: 16px;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* æ·±è‰²æ¨¡å¼æ ·å¼ */
        body.dark-mode {
            background-color: #121212;
            color: #ffffff;
        }

        h1 {
            font-size: 2.2em;
            color: #333;
            margin-top: 15px;
            transition: color 0.3s ease;
        }

        body.dark-mode h1 {
            color: #ffffff;
        }

        .container {
            position: relative;
            width: 95%;
            max-width: 800px;
            margin: 20px auto;
        }

        .image-grid {
            display: flex;
            justify-content: space-between;
            gap: 10px;
            margin-bottom: 20px;
        }

        .image-grid img {
            width: 32%;
            height: auto;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        body.dark-mode .image-grid img {
            box-shadow: 0 4px 8px rgba(255, 255, 255, 0.3);
        }

        .image-grid img:hover {
            transform: scale(1.05);
        }

        .back-to-top {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: rgba(0, 0, 0, 0.6);
            color: white;
            padding: 10px;
            border-radius: 50%;
            cursor: pointer;
            display: none;
        }

        .back-to-top:hover {
            background-color: rgba(0, 0, 0, 0.8);
        }

        /* æ·±è‰²æ¨¡å¼åˆ‡æ¢æŒ‰é’® */
        .mode-switch {
            position: fixed;
            bottom: 20px;
            left: 20px;
            cursor: pointer;
            font-size: 1.5em;
            z-index: 10;
        }

        /* æ³¨é‡Šæ–‡æœ¬ */
        .mode-switch-text {
            position: fixed;
            bottom: 25px;
            left: 70px;
            font-size: 1em;
            color: #333;
            z-index: 10;
        }

        body.dark-mode .mode-switch-text {
            color: #fff;
        }

        /* éŸ³é¢‘æ’­æ”¾å™¨æ ·å¼ */
        audio {
            margin: 20px 0;
            width: 90%;
        }

        /* è¿”å›æŒ‰é’®æ ·å¼ */
        .back-button {
            position: fixed;
            top: 10px;
            left: 10px;
            background-color: rgba(0, 0, 0, 0.6);
            color: white;
            padding: 10px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 1000;
        }

        .back-button:hover {
            background-color: rgba(0, 0, 0, 0.8);
        }

        /* å¯¼èˆªæŒ‰é’®æ ·å¼ */
        .nav-button {
            position: fixed;
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(0, 0, 0, 0.6);
            color: white;
            padding: 10px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 1000;
        }

        .nav-button:hover {
            background-color: rgba(0, 0, 0, 0.8);
        }

        .prev-button {
            left: 10px;
        }

        .next-button {
            right: 10px;
        }

        /* å¤§å›¾æ ·å¼ */
        .full-image {
            max-width: 100%;
            height: auto;
            margin-top: 50px;
        }

        /* è®¡æ•°å™¨æ ·å¼ */
        .click-counter {
            position: fixed;
            bottom: 60px;
            left: 20px;
            background-color: rgba(0, 0, 0, 0.6);
            color: white;
            padding: 10px;
            border-radius: 5px;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .click-counter.visible {
            opacity: 1;
        }
    </style>
</head>
<body>

<div class="container">

    <!-- å›¾ç‰‡ç½‘æ ¼ -->
    <div class="image-grid">
        <img src="images/photo1.jpg" alt="ç…§ç‰‡1" onclick="openImage('images/photo1.jpg', 0)">
        <img src="images/photo2.jpg" alt="ç…§ç‰‡2" onclick="openImage('images/photo2.jpg', 1)">
        <img src="images/photo3.jpg" alt="ç…§ç‰‡3" onclick="openImage('images/photo3.jpg', 2)">
    </div>

    <h1 id="header-text">ç‹å»·é¦™ä½ çœŸæ²¡å¸ˆå¾·</h1>

    <!-- éŸ³é¢‘æ’­æ”¾å™¨ -->
    <audio id="audio-player" controls>
        <source src="audio/audio_sample.mp3" type="audio/mpeg">
        æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾åŠŸèƒ½ã€‚
    </audio>

    <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
    <div class="back-to-top" onclick="scrollToTop()">â†‘</div>
</div>

<!-- åˆ‡æ¢æ·±è‰²æ¨¡å¼æŒ‰é’® -->
<div class="mode-switch" onclick="toggleDarkMode()">ğŸŒ™</div>

<!-- æ·±è‰²æ¨¡å¼æŒ‰é’®æ—çš„æ³¨é‡Š -->
<div class="mode-switch-text">ç‚¹å‡»æŒ‰é’®åˆ‡æ¢ä¸»é¢˜è‰²</div>

<!-- è®¡æ•°å™¨ -->
<div class="click-counter" id="click-counter"></div>

<script>
    const images = [
        { src: 'images/photo1.jpg', alt: 'ç…§ç‰‡1' },
        { src: 'images/photo2.jpg', alt: 'ç…§ç‰‡2' },
        { src: 'images/photo3.jpg', alt: 'ç…§ç‰‡3' }
    ];

    let clickCount = 0;
    let counterTimeout;

    // æ‰“å¼€å¤§å›¾
    function openImage(src, index) {
        const imageWindow = window.open('', '_blank', 'width=800,height=600');
        imageWindow.document.write(`
            <!DOCTYPE html>
            <html lang="zh">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>å¤§å›¾æŸ¥çœ‹</title>
                <style>
                    body {
                        font-family: 'ç­‰çº¿', sans-serif;
                        text-align: center;
                        margin: 0;
                        padding: 0;
                        background-color: #f8f8f8;
                    }

                    .back-button {
                        position: fixed;
                        top: 10px;
                        left: 10px;
                        background-color: rgba(0, 0, 0, 0.6);
                        color: white;
                        padding: 10px;
                        border-radius: 50%;
                        cursor: pointer;
                        z-index: 1000;
                    }

                    .back-button:hover {
                        background-color: rgba(0, 0, 0, 0.8);
                    }

                    .nav-button {
                        position: fixed;
                        top: 50%;
                        transform: translateY(-50%);
                        background-color: rgba(0, 0, 0, 0.6);
                        color: white;
                        padding: 10px;
                        border-radius: 50%;
                        cursor: pointer;
                        z-index: 1000;
                    }

                    .nav-button:hover {
                        background-color: rgba(0, 0, 0, 0.8);
                    }

                    .prev-button {
                        left: 10px;
                    }

                    .next-button {
                        right: 10px;
                    }

                    .full-image {
                        max-width: 100%;
                        height: auto;
                        margin-top: 50px;
                    }
                </style>
            </head>
            <body>
                <div class="back-button" onclick="window.close()">Ã—</div>
                <img src="${src}" alt="${images[index].alt}" class="full-image">
                <div class="nav-button prev-button" onclick="changeImage(${index}, -1)">â†</div>
                <div class="nav-button next-button" onclick="changeImage(${index}, 1)">â†’</div>
                <script>
                    const images = ${JSON.stringify(images)};
                    let currentIndex = ${index};

                    function changeImage(currentIndex, direction) {
                        currentIndex = (currentIndex + direction + images.length) % images.length;
                        document.querySelector('.full-image').src = images[currentIndex].src;
                        document.querySelector('.full-image').alt = images[currentIndex].alt;
                    }
                <\/script>
            </body>
            </html>
        `);
        imageWindow.document.close();
        imageWindow.focus();
    }

    // è¿”å›é¡¶éƒ¨
    function scrollToTop() {
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // æ˜¾ç¤º/éšè—è¿”å›é¡¶éƒ¨æŒ‰é’®
    window.onscroll = () => {
        if (document.documentElement.scrollTop > 200) {
            document.querySelector('.back-to-top').style.display = 'block';
        } else {
            document.querySelector('.back-to-top').style.display = 'none';
        }
    }

    // åˆ‡æ¢æ·±è‰²æ¨¡å¼
    function toggleDarkMode() {
        document.body.classList.toggle('dark-mode');
        const currentMode = document.body.classList.contains('dark-mode') ? 'dark' : 'light';
        localStorage.setItem('mode', currentMode); // ä¿å­˜æ¨¡å¼è®¾ç½®

        // å¢åŠ ç‚¹å‡»è®¡æ•°
        clickCount++;
        if (clickCount >= 5) {
            const counter = document.getElementById('click-counter');
            counter.innerText = `ç‚¹å‡»æ¬¡æ•°: ${clickCount}`;
            counter.classList.add('visible');

            // æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨
            clearTimeout(counterTimeout);

            // è®¾ç½®æ–°çš„å®šæ—¶å™¨
            counterTimeout = setTimeout(() => {
                counter.classList.remove('visible');
            }, 5000);
        }

        // æ£€æŸ¥æ˜¯å¦è¾¾åˆ°33æ¬¡
        if (clickCount === 33) {
            const audioPlayer = document.getElementById('audio-player');
            audioPlayer.src = 'audio/2.mp3';
            audioPlayer.play();
        }
    }

    // åŠ è½½æ—¶æ£€æŸ¥æ·±è‰²æ¨¡å¼è®¾ç½®
    window.onload = () => {
        const savedMode = localStorage.getItem('mode') || 'light';
        if (savedMode === 'dark') {
            document.body.classList.add('dark-mode');
        }
    }
</script>

</body>
</html>
